service: unknown-diary-stack

provider:
  name: aws
  runtime: go1.x
  region: ap-northeast-1
  profile: amagai
  stage: ${opt:stage, "dev"}

  environment:
    DIARY_STORE_DYNAMODB_TABLE: ${self:custom.diaryStoreDynamoDBTableCustom}

package:
  exclude:
    - ./**
  include:
    - ./bin/**

custom:
  ### dev / prod で使い分けるパラメータの設定
  # DynamoDBテーブル名
  diaryStoreDynamoDBTableCustom:
    dev: unknown_diary_dev
    prod: unknown_diary_prod

  ### データストア
  diaryStoreDynamoDBTable: ${self:custom.diaryStoreDynamoDBTableCustom.${self:provider.stage}}
  diaryStoreDynamoDBARN: 'arn:aws:dynamodb:${self:provider.region}:*:table/${self:custom.diaryStoreDynamoDBTable}'

functions:
  - ${file(./resources/receiver.yml)}

resources:
  - ${file(./resources/dynamodb.yml)}
  - ${file(./resources/cognito.yml)}
  - ${file(./resources/apigateway-authorizer.yml)}
